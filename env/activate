# Set project root
export PROJECT_ROOT="$PWD"

# Activate galenv
export PROJECT_GALENV="$PROJECT_ROOT/.galenv"
if [ -f "$PROJECT_GALENV" ]; then
    export GALENV_SYS="$(cat "$PROJECT_GALENV")"
    GALENV_PKG="grackle gizmo music"
    if [ "$GALENV_SYS" = "tscc" ]; then
        GALENV_PKG="fftw2 $GALENV_PKG"
    fi
    export GALENV_PKG
    export GALENV_REPO="$PROJECT_ROOT/env/galenv"
    export GALENV_LOCAL="$PROJECT_ROOT/.local"

    export GALENV_GIZMO_DIR="gizmo"
    export GALENV_GIZMO_DL="hg clone https://bitbucket.org/qobilidop/gizmo-agora -u agora gizmo"
    export GALENV_GIZMO_CONFIG_DIR="$PROJECT_ROOT/data/gizmo/config"
    export GALENV_GRACKLE_DIR="grackle"
    export GALENV_GRACKLE_DL="hg clone https://bitbucket.org/qobilidop/grackle-gizmo-agora -u gizmo-agora grackle"
    export GALENV_MUSIC_DIR="music"
    export GALENV_MUSIC_DL="hg clone https://bitbucket.org/ohahn/music"

    source "$GALENV_REPO/activate"
fi

# Activate conda env
export PROJECT_CONDA="$PROJECT_ROOT/.conda"
if [ -d "$PROJECT_CONDA/conda-meta" ]; then
    conda activate "$PROJECT_CONDA"
    export PATH="$PROJECT_CONDA/bin:$PATH"
fi
